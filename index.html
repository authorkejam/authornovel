<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Author Novel</title>
  <link rel="icon" type="image/png" href="weblogo.png" />
  <meta property="og:image" content="weblogo.png" />
  <meta property="og:title" content="Author Novel" />
  <meta property="og:description" content="Baca novel online, gratis selamanya" />
  <link rel="stylesheet" href="style.css" />
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&family=Open+Sans:wght@400;700&family=Lato:wght@400;700&family=Montserrat:wght@400;700&family=Oswald:wght@400;700&family=Raleway:wght@400;700&family=Poppins:wght@400;700&family=Playfair+Display:wght@400;700&family=Merriweather:wght@400;700&family=Inter:wght@400;700&family=Quicksand:wght@400;700&family=Karla:wght@400;700&family=Mulish:wght@400;700&family=Manrope:wght@400;700&family=Outfit:wght@400;700&family=Readex+Pro:wght@400;700&family=Space+Grotesk:wght@400;700&family=JetBrains+Mono:wght@400;700&family=Fira+Code:wght@400;700&family=Roboto+Mono:wght@400;700&family=Ubuntu+Mono:wght@400;700&family=Space+Mono:wght@400;700&family=Noto+Sans:wght@400;700&family=Lora:wght@400;700&family=Crimson+Text:wght@400;700&family=Libre+Baskerville:wght@400;700&family=Vollkorn:wght@400;700&family=EB+Garamond:wght@400;700&family=Old+Standard+TT:wght@400;700&family=Caveat:wght@400;700&family=Dancing+Script:wght@400;700&family=Great+Vibes&family=Satisfy&family=Allura&family=Kalam:wght@400;700&family=Shadows+Into+Light&display=swap" rel="stylesheet">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/lottie-web/5.7.13/lottie.min.js"></script>
  <meta property="og:title" content="Author Novel" />
  <meta property="og:description" content="Baca novel online, gratis selamanya" />
  <meta property="og:image" content="https://authorkejam.github.io/authornovel/weblogo.png" />
  <meta property="og:url" content="https://authorkejam.github.io/authornovel/" />
  <meta property="og:type" content="website" />
</head>
<main>
<body>

  <!-- Header untuk animasi pintu -->
  <header class="intro-header">
    <div class="custom-header">
      <span class="letter circle-a">A</span>
      <span class="letter">U</span>
      <span class="letter">T</span>
      <span class="letter">H</span>
      <span class="letter circle-or">O</span>
      <span class="letter circle-or">R</span>
      <span class="letter space">&nbsp;</span>
      <span class="letter">N</span>
      <span class="letter">O</span>
      <span class="letter">V</span>
      <span class="letter">E</span>
      <span class="letter">L</span>
    </div>
  </header>

  <!-- Header normal -->
  <header class="normal-header">
    <div class="custom-header">
      <span class="letter circle-a">A</span>
      <span class="letter">U</span>
      <span class="letter">T</span>
      <span class="letter">H</span>
      <span class="letter circle-or">O</span>
      <span class="letter circle-or">R</span>
      <span class="letter space">&nbsp;</span>
      <span class="letter">N</span>
      <span class="letter">O</span>
      <span class="letter">V</span>
      <span class="letter">E</span>
      <span class="letter">L</span>
    </div>
  </header>
  <button class="menu-btn" id="menuBtn">‚ò∞</button>

  <div class="sidebar" id="sidebar">
    <button class="back-btn" id="backBtn">‚Üê Back to Novels</button>
    <button id="darkModeToggle">üåô</button>
    <h2 id="novelTitle">Chapters</h2>
    <div class="chapter-list" id="chapterList"></div>

  </div>

  <div class="main-container">
    <div class="sort-controls">
      <label for="sortSelect">Sortir Novel:</label>
      <select id="sortSelect">
        <option value="latest">Terbaru</option>
        <option value="oldest">Terlama</option>
        <option value="name">Nama A-Z</option>
      </select>
      <label for="fontSelect">Pilih Font:</label>
      <select id="fontSelect">
        <option value="Arial, sans-serif">Arial</option>
        <option value="Verdana, sans-serif">Verdana</option>
        <option value="'Trebuchet MS', sans-serif">Trebuchet MS</option>
        <option value="'Times New Roman', serif">Times New Roman</option>
        <option value="'Courier New', monospace">Courier New</option>
        <option value="Georgia, serif">Georgia</option>
       
        <option value="'Open Sans', sans-serif">Open Sans</option>
        <option value="'Lato', sans-serif">Lato</option>
        <option value="'Montserrat', sans-serif">Montserrat</option>
        <option value="'Oswald', sans-serif">Oswald</option>
        <option value="'Raleway', sans-serif">Raleway</option>
        <option value="'Poppins', sans-serif">Poppins</option>

        <option value="'Playfair Display', serif">Playfair Display</option>
        <option value="'Merriweather', serif">Merriweather</option>



        <option value="'Inter', sans-serif">Inter</option>


        <option value="'Quicksand', sans-serif">Quicksand</option>
        <option value="'Karla', sans-serif">Karla</option>


        <option value="'Mulish', sans-serif">Mulish</option>


        <option value="'Manrope', sans-serif">Manrope</option>
        <option value="'Outfit', sans-serif">Outfit</option>
        <option value="'Readex Pro', sans-serif">Readex Pro</option>
        <option value="'Space Grotesk', sans-serif">Space Grotesk</option>
        <option value="'JetBrains Mono', monospace">JetBrains Mono</option>
        <option value="'Fira Code', monospace">Fira Code</option>
        
        <option value="'Space Mono', monospace">Space Mono</option>
        <option value="'Noto Sans', sans-serif">Noto Sans</option>
        <option value="'Lora', serif">Lora</option>
        <option value="'Crimson Text', serif">Crimson Text</option>
        <option value="'Libre Baskerville', serif">Libre Baskerville</option>
        <option value="'Vollkorn', serif">Vollkorn</option>
        <option value="'EB Garamond', serif">EB Garamond</option>
        <option value="'Old Standard TT', serif">Old Standard TT</option>
        <option value="'Kalam', cursive">Kalam</option>
        <option value="'Shadows Into Light', cursive">Shadows Into Light</option>
        <option value="'Caveat', cursive">Caveat</option>
        <option value="'Satisfy', cursive">Satisfy</option>
        <option value="'Dancing Script', cursive">Dancing Script</option>
        <option value="'Great Vibes', cursive">Great Vibes</option>
        <option value="'Allura', cursive">Allura</option>
  
      </select>
    </div>
    <div class="view-controls">
      <button id="blogsBtn">Blogs</button>
      <button id="novelsBtn">Novels</button>
      <button id="shortstoriesBtn">Short Stories</button>
      <button id="aboutBtn">About</button>
    </div>
    <div class="gallery" id="novelGallery"></div>

    <div class="reader" id="reader">
      <div class="content">
        <button class="reader-back-btn" id="readerBackBtn">‚Üê Back to Novels</button>
        <h2 id="readerNovelTitle"></h2>
        <h3 id="readerChapterTitle" class="content-chapter-title"></h3>
        <div class="chapter-nav">
          <button id="prevChapterBtn" class="nav-btn">‚Üê previous</button>
          <button id="nextChapterBtn" class="nav-btn">next ‚Üí</button>
        </div>
        <div class="font-controls">
          <button id="decreaseFont" class="font-btn">A-</button>
          <button id="increaseFont" class="font-btn">A+</button>
          <button id="alignLeft" class="font-btn">Left</button>
          <button id="alignCenter" class="font-btn">Center</button>
          <button id="alignJustify" class="font-btn">Justify</button>
        </div>
        <div class="chapter-content" id="chapterContent"></div>
      </div>
    </div>
  </div>
  <script src="data/novel.js"></script>
  <script src="data/short.js"></script>
  <script src="data/blog.js"></script>
  <script src="data/about.js"></script>
  <script>
    let currentView = 'novels';
    let currentData = novels;

    function sortData(data, criterion) {
      data.sort((a, b) => {
        if (criterion === 'name') {
          return a.title.localeCompare(b.title);
        } else if (criterion === 'latest') {
          const dateA = a.date ? new Date(a.date.split('-').reverse().join('-')) : new Date(0);
          const dateB = b.date ? new Date(b.date.split('-').reverse().join('-')) : new Date(0);
          return dateB - dateA;
        } else if (criterion === 'oldest') {
          const dateA = a.date ? new Date(a.date.split('-').reverse().join('-')) : new Date(0);
          const dateB = b.date ? new Date(b.date.split('-').reverse().join('-')) : new Date(0);
          return dateA - dateB;
        }
      });
    }

    const sortSelect = document.getElementById('sortSelect');
    sortSelect.addEventListener('change', () => {
      sortData(currentData, sortSelect.value);
      renderGallery();
    });

    // Initial sort
    sortData(currentData, 'latest');

    // Improved markdown to HTML converter for basic markdown used here
    function markdownToHTML(md) {
      const blocks = md.split(/\n\s*\n/);
      let html = '';

      blocks.forEach(block => {
        block = block.trim();
        if (block === '') return;

        // Handle horizontal rules
        if (block.match(/^[-*_]{3,}$/)) {
          html += '<hr>';
          return;
        }

        if (block.match(/^#{1,3} /) || block.match(/^\> /)) {
          // heading or blockquote, process as is
          const lines = block.split('\n');
          lines.forEach(line => {
        let converted = line
          .replace(/^# (.*$)/gim, '<h1>$1</h1>')
          .replace(/^## (.*$)/gim, '<h2>$1</h2>')
          .replace(/^### (.*$)/gim, '<h3>$1</h3>')
          .replace(/^\> (.*$)/gim, '<blockquote>$1</blockquote>')
          .replace(/\*\*(.*)\*\*/gim, '<strong>$1</strong>')
          .replace(/\*(.*)\*/gim, '<em>$1</em>')
          .replace(/`([^`]+)`/g, '<code>$1</code>')
          .replace(/\[([^\]]+)\]\(([^)]+)\)/g, '<a href="$2" target="_blank">$1</a>'); // links akun
            html += converted + '<br />';
          });
        } else {
          // paragraph or list
          const lines = block.split('\n');
          let paraHtml = '';
          let inUnorderedList = false;
          let inOrderedList = false;
          lines.forEach(line => {
            if (/^\d+\./.test(line)) {
              if (!inOrderedList) {
                paraHtml += '<ol>';
                inOrderedList = true;
              }
              if (inUnorderedList) {
                paraHtml += '</ul>';
                inUnorderedList = false;
              }
              paraHtml += '<li>' + line.replace(/^\d+\. ?/, '') + '</li>';
            } else if (/^\- /.test(line)) {
              if (!inUnorderedList) {
                paraHtml += '<ul>';
                inUnorderedList = true;
              }
              if (inOrderedList) {
                paraHtml += '</ol>';
                inOrderedList = false;
              }
              paraHtml += '<li>' + line.replace(/^\- /, '') + '</li>';
            } else {
              if (inOrderedList) {
                paraHtml += '</ol>';
                inOrderedList = false;
              }
              if (inUnorderedList) {
                paraHtml += '</ul>';
                inUnorderedList = false;
              }
              let converted = line
                .replace(/\*\*(.*)\*\*/gim, '<strong>$1</strong>')
                .replace(/\*(.*)\*/gim, '<em>$1</em>')
                .replace(/\[([^\]]+)\]\(([^)]+)\)/g, '<a href="$2" target="_blank">$1</a>'); // links akun
              paraHtml += converted + ' ';
            }
          });
          if (inOrderedList) {
            paraHtml += '</ol>';
          }
          if (inUnorderedList) {
            paraHtml += '</ul>';
          }
          html += '<p>' + paraHtml.trim() + '</p>';
        }
      });

      return html.trim();
    }

    const novelGallery = document.getElementById('novelGallery');
    const sidebar = document.getElementById('sidebar');
    const menuBtn = document.getElementById('menuBtn');
    const backBtn = document.getElementById('backBtn');
    const chapterList = document.getElementById('chapterList');
    const reader = document.getElementById('reader');
    const readerNovelTitle = document.getElementById('readerNovelTitle');
    const readerChapterTitle = document.getElementById('readerChapterTitle');
    const chapterContent = document.getElementById('chapterContent');
    const novelTitle = document.getElementById('novelTitle');
    const readerBackBtn = document.getElementById('readerBackBtn');

    function updateBackButtons() {
      const viewName = currentView === 'shortstories' ? 'Short Stories' : currentView.charAt(0).toUpperCase() + currentView.slice(1);
      backBtn.textContent = `‚Üê Back to ${viewName}`;
      readerBackBtn.textContent = `‚Üê Back to ${viewName}`;
    }

    // Hide sidebar when clicking outside
    document.addEventListener('click', (e) => {
      if (!sidebar.contains(e.target) && e.target !== menuBtn) {
        sidebar.classList.remove('active');
        menuBtn.style.display = 'block';
        sidebarShownByHover = false;
        sidebarShownBySwipe = false;
      }
    });

    // Show sidebar on hover left edge (desktop)
    document.addEventListener('mousemove', (e) => {
      if (currentNovel) {
        if (e.clientX < 60 && !sidebar.classList.contains('active')) {
          sidebar.classList.add('active');
          sidebarShownByHover = true;
          menuBtn.style.display = 'none';
        } else if (e.clientX >= 60 && sidebarShownByHover && !sidebar.contains(e.target)) {
          sidebar.classList.remove('active');
          sidebarShownByHover = false;
          menuBtn.style.display = 'block';
        }
      }
    });

    // Hide sidebar on mouse leave (desktop) only if not in a novel
    sidebar.addEventListener('mouseleave', () => {
      if (sidebarShownByHover && !currentNovel) {
        sidebar.classList.remove('active');
        sidebarShownByHover = false;
        menuBtn.style.display = 'block';
      }
    });

    // Touch events for swipe right (mobile)
    document.addEventListener('touchstart', (e) => {
      touchStartX = e.touches[0].clientX;
      touchStartY = e.touches[0].clientY;
      touchInReader = reader.contains(e.touches[0].target);
    });

    document.addEventListener('touchend', (e) => {
      const touchEndX = e.changedTouches[0].clientX;
      const touchEndY = e.changedTouches[0].clientY;
      const deltaX = touchEndX - touchStartX;
      const deltaY = touchEndY - touchStartY;
      if (currentNovel && Math.abs(deltaX) > Math.abs(deltaY) && deltaX > 100 && touchInReader && !sidebar.classList.contains('active')) {
        sidebar.classList.add('active');
        sidebarShownBySwipe = true;
        menuBtn.style.display = 'none';
      } else if (Math.abs(deltaX) > Math.abs(deltaY) && deltaX < -100 && sidebar.classList.contains('active')) {
        sidebar.classList.remove('active');
        sidebarShownBySwipe = false;
        menuBtn.style.display = 'block';
      }
    });

    // Render novel gallery
    function renderGallery() {
      novelGallery.innerHTML = '';
      if (currentData.length === 0) {
        const message = currentView === 'shortstories' ? 'No short stories available yet.' : `No ${currentView} available yet.`;
        novelGallery.innerHTML = `<p>${message}</p>`;
        return;
      }
      if (currentView === 'blogs') {
        novelGallery.classList.add('blog-view');
        currentData.forEach((item) => {
          item.chapters.forEach((chapter) => {
            const post = document.createElement('div');
            post.className = 'blog-post';
            const title = document.createElement('h2');
            title.textContent = chapter.title;
            post.appendChild(title);
            const content = document.createElement('div');
            content.className = 'blog-content';
            post.appendChild(content);
            novelGallery.appendChild(post);
            // Fetch and render content
            fetch(chapter.file)
              .then(response => response.text())
              .then(md => {
                content.innerHTML = markdownToHTML(md);
              })
              .catch(error => {
                content.innerHTML = '<p>Error loading content.</p>';
              });
          });
        });
        novelGallery.style.display = 'block';
      } else if (currentView === 'about') {
        novelGallery.classList.add('blog-view');
        currentData.forEach((item) => {
          item.chapters.forEach((chapter) => {
            const post = document.createElement('div');
            post.className = 'blog-post';
            const title = document.createElement('h2');
            title.textContent = chapter.title;
            post.appendChild(title);
            const content = document.createElement('div');
            content.className = 'blog-content';
            post.appendChild(content);
            novelGallery.appendChild(post);
            // Fetch and render content
            fetch(chapter.file)
              .then(response => response.text())
              .then(md => {
                content.innerHTML = markdownToHTML(md);
              })
              .catch(error => {
                content.innerHTML = '<p>Error loading content.</p>';
              });
          });
        });
        novelGallery.style.display = 'block';
      } else {
        novelGallery.classList.remove('blog-view');
        currentData.forEach((item, index) => {
          const card = document.createElement('div');
          card.className = 'novel-card';

          if (item.cover) {
            const img = document.createElement('img');
            img.src = item.cover;
            img.alt = item.title + ' cover';
            card.appendChild(img);
          }

          // Judul
          const title = document.createElement('div');
          title.className = 'novel-title';
          title.textContent = item.title;
          card.appendChild(title);

          // Date
          if (item.date) {
            const date = document.createElement('div');
            date.className = 'novel-date';
            date.textContent = item.date;
            card.appendChild(date);
          }

          //Status
          if (item.status) {
            const status = document.createElement('div');
            status.className = 'novel-status';
            status.textContent = item.status;
            card.appendChild(status);
          }

          // Genre
          if (item.genre) {
            const genre = document.createElement('div');
            genre.className = 'novel-genre outline-text';
            genre.textContent = "" + item.genre.join(', ');
            card.appendChild(genre);
          }

          //warna novel card
          if (item.title === "Being Kind?") {
            card.classList.add('being-kind');
          }

          card.onclick = () => openNovel(item);
          novelGallery.appendChild(card);

          // Add slide down animation with stagger
          setTimeout(() => {
            card.classList.add('animate-in');
          }, index * 100);
        });
        novelGallery.style.display = 'grid';
      }
      reader.classList.remove('active');
      menuBtn.style.display = 'none';
      sidebar.classList.remove('active');
      readerBackBtn.style.display = 'none';
      sidebarShownByHover = false;
      sidebarShownBySwipe = false;
    }

    // Open novel and show chapters in sidebar
    function openNovel(novel) {
      currentNovel = novel;
      novelTitle.textContent = novel.title;
      chapterList.innerHTML = '';
      novel.chapters.forEach((chapter, index) => {
        const button = document.createElement('button');
        button.textContent = chapter.title;
        button.onclick = () => openChapter(index);
        chapterList.appendChild(button);
      });
      sidebar.classList.add('active');
      menuBtn.style.display = 'none';
      novelGallery.style.display = 'none';
      reader.classList.add('active');
      readerBackBtn.style.display = 'block';
      // Load last read chapter or first chapter
      const savedChapter = localStorage.getItem(`novel-${novel.id}-chapter`);
      const startIndex = savedChapter !== null ? parseInt(savedChapter) : 0;
      openChapter(startIndex);
      sidebarShownByHover = false;
      sidebarShownBySwipe = false;
    }

    // Open chapter and render content
    function openChapter(index) {
      if (!currentNovel) return;
      if (index < 0 || index >= currentNovel.chapters.length) return;
      const chapter = currentNovel.chapters[index];
      currentChapterIndex = index;
      localStorage.setItem(`novel-${currentNovel.id}-chapter`, index);
      readerNovelTitle.textContent = currentNovel.title;
      readerChapterTitle.textContent = chapter.title;
      chapterContent.classList.remove('content-visible');
      fetch(chapter.file)
        .then(response => response.text())
        .then(md => {
          chapterContent.innerHTML = markdownToHTML(md);
          chapterContent.classList.add('content-visible');
          window.scrollTo({ top: 0, behavior: 'smooth' });
        })
        .catch(error => {
          chapterContent.innerHTML = '<p>Error loading chapter.</p>';
        });
      // Update current chapter highlight
      const buttons = chapterList.querySelectorAll('button');
      buttons.forEach((btn, i) => {
        if (i === index) {
          btn.classList.add('current-chapter');
        } else {
          btn.classList.remove('current-chapter');
        }
      });
      // Hide sidebar when switching chapters
      sidebar.classList.remove('active');
      menuBtn.style.display = 'block';
      sidebarShownByHover = false;
      sidebarShownBySwipe = false;
    }

    // Back to novel gallery
    backBtn.onclick = () => {
      currentNovel = null;
      renderGallery();
      menuBtn.style.display = 'none';
      readerBackBtn.style.display = 'none';
      sidebarShownByHover = false;
      sidebarShownBySwipe = false;
    };

    // Reader back button
    readerBackBtn.onclick = () => {
      currentNovel = null;
      renderGallery();
      sidebarShownByHover = false;
      sidebarShownBySwipe = false;
    };

    // Add event listeners for view buttons
    const novelsBtn = document.getElementById('novelsBtn');
    const blogsBtn = document.getElementById('blogsBtn');
    const shortstoriesBtn = document.getElementById('shortstoriesBtn');

    novelsBtn.addEventListener('click', () => {
      currentView = 'novels';
      currentData = novels;
      sortData(currentData, sortSelect.value);
      updateBackButtons();
      renderGallery();
    });

    blogsBtn.addEventListener('click', () => {
      currentView = 'blogs';
      currentData = blogs;
      sortData(currentData, sortSelect.value);
      updateBackButtons();
      renderGallery();
    });

    shortstoriesBtn.addEventListener('click', () => {
      currentView = 'shortstories';
      currentData = shortstories;
      sortData(currentData, sortSelect.value);
      updateBackButtons();
      renderGallery();
    });

    const aboutBtn = document.getElementById('aboutBtn');
    aboutBtn.addEventListener('click', () => {
      currentView = 'about';
      currentData = about;
      sortData(currentData, sortSelect.value);
      updateBackButtons();
      renderGallery();
    });

    // Track current chapter index for navigation
    let currentChapterIndex = 0;
    let currentNovel = null;  // Added to fix ReferenceError for currentNovel
    let touchInReader = false;

    // Previous and Next chapter buttons
    const prevChapterBtn = document.getElementById('prevChapterBtn');
    const nextChapterBtn = document.getElementById('nextChapterBtn');

    prevChapterBtn.addEventListener('click', () => {
      if (!currentNovel) return;
      if (currentChapterIndex > 0) {
        openChapter(currentChapterIndex - 1);
      }
    });

    nextChapterBtn.addEventListener('click', () => {
      if (!currentNovel) return;
      if (currentChapterIndex < currentNovel.chapters.length - 1) {
        openChapter(currentChapterIndex + 1);
      }
    });

    // Toggle sidebar menu
    menuBtn.onclick = () => {
      sidebar.classList.toggle('active');
      if (sidebar.classList.contains('active')) {
        menuBtn.style.display = 'none';
      }
      sidebarShownByHover = false;
      sidebarShownBySwipe = false;
    };

    // Initial render
    renderGallery();

    // Font selection logic
    const fontSelect = document.getElementById('fontSelect');
    let currentFontFamily = localStorage.getItem('selectedFont') || 'Arial, sans-serif';

    function updateFontFamily() {
      chapterContent.style.fontFamily = currentFontFamily;
      localStorage.setItem('selectedFont', currentFontFamily);
    }

    fontSelect.addEventListener('change', () => {
      currentFontFamily = fontSelect.value;
      updateFontFamily();
    });

    // Set initial font from localStorage
    fontSelect.value = currentFontFamily;
    updateFontFamily();

    // Font size control logic
    const decreaseFontBtn = document.getElementById('decreaseFont');
    const increaseFontBtn = document.getElementById('increaseFont');
    let currentFontSize = 16; // default font size in px

    function updateFontSize() {
      chapterContent.style.fontSize = currentFontSize + 'px';
      /*const paragraphs = chapterContent.querySelectorAll('p');
      paragraphs.forEach(p => {
        p.style.fontSize = currentFontSize + 'px';
      });*/
    }

    decreaseFontBtn.addEventListener('click', () => {
      if (currentFontSize > 10) { // minimum font size
        currentFontSize -= 2;
        updateFontSize();
      }
    });

    increaseFontBtn.addEventListener('click', () => {
      if (currentFontSize < 36) { // maximum font size
        currentFontSize += 2;
        updateFontSize();
      }
    });

    // Track current text alignment, default to 'left'
    let currentTextAlign = 'left';

    // Update font size after loading chapter content
    const originalOpenChapter = openChapter;
    openChapter = function(index) {
      originalOpenChapter(index);
      // Delay update to ensure content is loaded
      setTimeout(() => {
        updateFontSize();
        updateFontFamily();
        chapterContent.style.textAlign = currentTextAlign; // apply last selected alignment/ingat pilihan align terakhir
      }, 100);
    };

    // Text alignment control logic
    const alignLeftBtn = document.getElementById('alignLeft');
    const alignCenterBtn = document.getElementById('alignCenter');
    const alignJustifyBtn = document.getElementById('alignJustify');

    alignLeftBtn.addEventListener('click', () => {
      chapterContent.style.textAlign = 'left';
      currentTextAlign = 'left';
    });

    alignCenterBtn.addEventListener('click', () => {
      chapterContent.style.textAlign = 'center';
      currentTextAlign = 'center';
    });

    alignJustifyBtn.addEventListener('click', () => {
      chapterContent.style.textAlign = 'justify';
      currentTextAlign = 'justify';
    });

    // Hide header and footer on scroll
    let lastScrollTop = 0;
    window.addEventListener('scroll', function() {
      let scrollTop = window.pageYOffset || document.documentElement.scrollTop;
      if (scrollTop > lastScrollTop && scrollTop > 100) {
        document.querySelector('.normal-header').classList.add('hidden');
        document.querySelector('.normal-footer').classList.add('hidden');
      } else {
        document.querySelector('.normal-header').classList.remove('hidden');
        document.querySelector('.normal-footer').classList.remove('hidden');
      }
      lastScrollTop = scrollTop;
    });

    // Dark mode toggle
    const darkModeToggle = document.getElementById('darkModeToggle');
    darkModeToggle.addEventListener('click', () => {
      document.body.classList.toggle('dark');
      darkModeToggle.textContent = document.body.classList.contains('dark') ? '‚òÄÔ∏è' : 'üåô';
    });

    // Intro animation
    document.addEventListener('DOMContentLoaded', function() {
      const introHeader = document.querySelector('.intro-header');
      const introFooter = document.querySelector('.intro-footer');
      const normalHeader = document.querySelector('.normal-header');
      const normalFooter = document.querySelector('.normal-footer');
      const mainContainer = document.querySelector('.main-container');
      const darkModeToggle = document.getElementById('darkModeToggle');

      // Initially hide main content and toggle
      mainContainer.style.opacity = '0';
      darkModeToggle.style.display = 'none';

      // Letters animate automatically via CSS (slide in from right with stagger)

      // After letters finish animating (2.2s), open doors and reveal content immediately
      setTimeout(() => {
        introHeader.style.transform = 'translateY(-100%)';
        introFooter.style.transform = 'translateY(100%)';

        // Reveal main content and normal header/footer
        mainContainer.style.opacity = '1';
        darkModeToggle.style.display = 'block';
        darkModeToggle.style.opacity = '1';
        normalHeader.style.display = 'block';
        normalFooter.style.display = 'block';
      }, 2200);
    });

  </script>
</body>
</main>

  <!-- Footer untuk animasi pintu -->
  <footer class="intro-footer">

  </footer>

  <!-- Footer normal -->
  <footer class="normal-footer">
  <p><h3>&copy;2025 Author Kejam Blog. All rights reserved.</h3></p>
  </footer>
  
</html>

